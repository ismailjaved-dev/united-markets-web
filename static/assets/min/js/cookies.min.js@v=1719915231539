const utmParams={source:"utm_source",medium:"utm_medium",campaign:"utm_campaign",content:"utm_content",term:"utm_term",cxd:"cxd"},additionalParams={pn:"pn"},searchEngines=["google","bing","yahoo"],socialMedias=["facebook","twitter","pinterest","linkedIn","youtube","instagram","linkedIn","glassdoor","vkontakte","snapchat","tiktok"],mediumType={direct:"direct",seo:"seo",social:"social",referrer:"referrer",affiliate:"affiliate",ib:"ib",brand:"brand",ppc:"ppc"},marketingCookies={utm:"utm",cellXpert:"CXD",pn:"pn"},cookieExpire={utm:90,cxd:90,pn:90,licenseLanguage:365},skillingHosts=["skilling.com","skilling-dev.com","sk-intl.tech","sk-trad-intl.com","skil-intl.com"],currentUrl=new URL(location.href),docReferrer=document.referrer?new URL(document.referrer):null,validHost=e=>docReferrer.hostname.includes(e),rootDomain=(e=>{const o=document.location.host.split(".");return o.splice(o.length-2,o.length).join(".")})();function shouldUpdateUtmCookie(e,o,t){const i=e&&skillingHosts.some(validHost),n=!t||0===Object.keys(t).length,r=t&&t.medium!==mediumType.affiliate&&t.medium!==mediumType.ib&&t.medium!==mediumType.ppc,a=o===mediumType.affiliate||o===mediumType.ib;return!i&&(n||r||a)}function getCookieContent(e,o){const t=o?o.href:null,i={channel:null,source:e[utmParams.source]||null,campaign:e[utmParams.campaign]||null,medium:e[utmParams.medium]||null,content:e[utmParams.content]||null,term:e[utmParams.term]||null};return t&&!i.source&&(i.source=t,searchEngines.some(e=>t.toLowerCase().includes(e))?i.medium=mediumType.seo:socialMedias.some(e=>t.toLowerCase().includes(e))?i.medium=mediumType.social:i.medium=mediumType.referrer),i.medium||(i.medium=mediumType.brand,i.source=mediumType.direct),i.channel=i.medium,i}function getCookie(e){const o=document.cookie.split(";"),t=e+"=";let i;for(let e=0;e<o.length;e+=1)if(0===(i=o[e].replace(/^\s\+/g,"").trim()).indexOf(t))return i.substring(t.length,i.length);return null}function setCookie(e,o,t=99999,i=!1,n="/"){const r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3);const a=`expires=${r.toUTCString()}`,m=`path=${n}`,s=i?`;domain=${rootDomain}`:"";document.cookie=`${e}=${o};${a};${m}${s}`}function deleteCookie(e,o=!1){setCookie(e,"",-1,o)}const queryParams=new Proxy(new URLSearchParams(window.location.search),{get:(e,o)=>e.get(o)}),existingUtmCookie=JSON.parse(getCookie(marketingCookies.utm)),existingCellXpertCookie=getCookie(marketingCookies.cellXpert),existingPnCookie=getCookie(marketingCookies.pn),newMediumParam=queryParams[utmParams.medium],newCellXpertParam=queryParams[utmParams.cxd],newPnParam=queryParams[additionalParams.pn];function setLicenseLanguageCookies(e){const o=e.pathname.replace(/^\/*|\/*$/g,"").split("/").slice(0,2),t={eu:"CYSEC",row:"SEYCHELLES"}[o[0]],i=o[1];return setCookie("license",t,cookieExpire.licenseLanguage),setCookie("language",i,cookieExpire.licenseLanguage),{license:t,language:i}}function updatePnCookie(e,o,t){const i=t?t.hostname:null;let n=o;if(e){const t=o&&-1==o.split("|").indexOf(e);o?t&&(n=o+"|"+e,setCookie(marketingCookies.pn,n,cookieExpire.pn)):(n=e,setCookie(marketingCookies.pn,e,cookieExpire.pn))}else i&&!o&&(n=i,setCookie(marketingCookies.pn,n,cookieExpire.pn));return n}function updateCellXpertCookie(e,o){let t=null;return(!o||o&&o!=e)&&(t=e,setCookie(marketingCookies.cellXpert,e,cookieExpire.cxd)),t}function updateUtmCookie(e,o,t,i){const n=getCookieContent(e,o);setCookie(marketingCookies.utm,JSON.stringify(n),cookieExpire.utm),t&&!i&&deleteCookie(marketingCookies.cellXpert,!0)}function removeUrlParams(){return Object.values(utmParams).forEach(e=>{currentUrl.searchParams.delete(e)}),Object.values(additionalParams).forEach(e=>{currentUrl.searchParams.delete(e)}),history.pushState(null,"",currentUrl),currentUrl}setLicenseLanguageCookies(currentUrl),updatePnCookie(newPnParam,existingPnCookie,docReferrer),newCellXpertParam&&updateCellXpertCookie(newCellXpertParam,existingCellXpertCookie),shouldUpdateUtmCookie(docReferrer,newMediumParam,existingUtmCookie)&&updateUtmCookie(queryParams,docReferrer,existingCellXpertCookie,newCellXpertParam),removeUrlParams();